A national day of mourning has been declared after Taliban militants killed at least 140 people in an attack on an army compound in northern Afghanistan. Some say intelligence failures and other mistakes by Kabul and its foreign allies led to the incident.Afghanistan's president on Saturday ordered that flags be flown at half-mast after Taliban militants disguised in military uniforms killed scores of people in an attack on an army base.At least 10 militants launched an attack on a base in northern Balkh province on Friday, storming it in three military vehicles. They killed most of their victims in a mosque inside the compound where army personnel were at Friday prayers."They are getting closer to our building and shooting anyone they see," a medical staffer of the 209th Shaheen Military Corps told DW only minutes after the attack on the army base had started."Pray for me," the medical staffer begged in his telephone conversation with DW, as if those were his last words. DW was able to establish contact with the corps medical staffer only one hour after the first call. Fortunately, he was alive and in a secure location, but had very sad news."More then 135 are killed and many more wounded," he said.Three-hour rampageThe attackers used rocket-propelled grenades and rifles. Several of them detonated suicide vests packed with explosives, officials told the Reuters news agency.Witnesses described confusion as soldiers were uncertain about the attackers' true identity."It was a chaotic scene and I didn't know what to do," one army officer wounded in the attack told&nbsp;Reuters. "There was gunfire and explosions everywhere.""They entered the compound using two army trucks with machine guns on top of them. They opened fire on everyone. And then they entered the mosque and dining room, killing everyone indiscriminately," Mohammad Hussain, an army officer wounded in the attack, told the Agency France-Presse news agency as he was treated in hospital.One official, speaking on condition of anonymity, told Reuters at least 140 soldiers were killed, while an Afghan army source told AFP it was at many as 150. Scores more were injured.All the assailants were also killed after going on a rampage for more than three hours at the base.Fighting went on for some three hours before the attackers were killedNational day of mourningThe base in Mazar-i-Sharif is the command center for northern Afghanistan. A contingent from the German army is based there as well, but no German soldiers were reported injured in the attack.President Ashraf Ghani declared a national day of mourning after visiting the site of the attack.Ghani ordered that flags be flown at half-mast on Sunday in memory of the troops who died.The president held an emergency meeting with senior security officials and called for a "serious" investigation into the attack.In a statement online, he condemned the attack as "cowardly" and the work of "infidels."This is the second such attack on a secure facility in recent months. In early March, "Islamic State" (IS) militants attacked a military hospital in Kabul and killed 49 people, leaving 76 wounded. The actual number of those killed in the Kabul attack is also said to be much higher than the numbers given by the Afghan government.Taliban militants are stepping up attacks in Afghanistan's northTaliban boosts attacks in northern Afghan provincesSuch a large-scale attack in Balkh province would have been considered very unlikely only a few years back. Northern provinces - Balkh in particular - were considered the safest in Afghanistan until 2010. But now Kunduz, Balkh, Faryab, Sari Pul and Baghlan - all in the north&nbsp;- have become a new battlefield between Afghan security forces and its armed opponents.Read more on the situation in northern Afghanistan here.The Taliban, which claimed responsibility for Friday's attack, has boosted its presence in several districts and is threatening to launch attacks on provincial capitals. The group was even able to briefly take control of northern Kunduz city in 2015 and for a second time a year later."The government controls Kunduz city and district centers but the Taliban are in charge of the rest of the province," Abdul Ahad Turyal Kakar, a member of the provincial council in Kunduz, told DW.The situation in Balkh is not as dire as in Kunduz, but Friday's attack highlights the Taliban's ability to launch a&nbsp;heavy attack&nbsp;on one of the most heavily guarded compounds in the safest northern Afghan province.Foreign terrorists on the moveThe Taliban is not the only worry for locals in Afghanistan's north:&nbsp;Locals and officials claim that fighters from IS&nbsp;and other foreign terrorist groups are becoming more active.Yunus Fakur, a Kabul-based analyst, believes the situation in the north is also a result of the mistakes Kabul and its international allies have made in the past decade. He said that besides the Taliban and foreign insurgent groups, local commanders that are heavily armed and who fear irrelevance also pose a threat to the region."Post 2001, many local commanders in (the) Afghan north remained heavily armed, and whenever they feel that they don't get the support they need from Kabul, they join hands with the Taliban and other groups to ensure their relevance," Fakur told DW.Some military experts, on the other hand, stressed that Friday's attack happened only because of&nbsp;intelligence failures."If the intelligence community fails, there is not much soldiers on the ground can do," retired Afghan general Atiqullah Amarkhail&nbsp;told DW.Amarkhail stressed the government should curb corruption, improve intelligence organizations and hold local officials accountable to prevent such incidents in the future.